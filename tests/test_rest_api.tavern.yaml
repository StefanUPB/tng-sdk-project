---
# requires to start the service before (tng-project -s)
test_name: Test /pings endpoint
stages:
  - name: Ping pong (for health checks)
    request:
      url: http://localhost:5098/api/v1/pings
      method: GET
    # expected response
    response:
      status_code: 200
      body:
        alive_since: !anything

---
test_name: Test /projects endpoint
stages:
  - name: Add new project with all defaults
    request:
      url: http://localhost:5098/api/v1/projects
      method: POST
    response:
      body:
        uuid: !anything
      # save the project UUID for later tests
      save:
        body:
          uuid_project1: uuid

  - name: Add new project with specific descriptorgen args
    request:
      url: http://localhost:5098/api/v1/projects
      method: POST
      json:
        author: alice
        vendor: eu.tango
        vnfs: 3
      headers:
        content-type: application/json
    response:
      body:
        uuid: !anything
      save:
        body:
          uuid_project2: uuid

# FIXME: only check if uuids are in the list. not exact match
#  - name: Check if new projects are included in list
#    request:
#      url: http://localhost:5098/api/v1/projects
#      method: GET
#      response:
#        projects:
#          - uuid_projects1